# LLD 输出模板

本文档定义 lld-writer 各阶段的输出格式模板。

---

## 上下文收集报告

**输出时机**：Phase 0.5

```markdown
## 上下文收集报告

### 基线文档
| 文档类型 | 路径 | 版本 | 状态 |
|----------|------|------|------|
| PRD | {路径} | {版本} | 已确认 |
| HLD | {路径} | {版本} | 已确认 |
| Contract | {路径} | {版本} | 已确认 |
| Guardrails | {路径/无} | - | 已确认 |

### 关键约束提取
- 技术栈：{从 HLD/Guardrails 提取}
- 强制模块：{从 Guardrails 提取}
- 复用要求：{从 HLD 提取}
```

---

## LLD 文档信息

**输出时机**：Phase 2.2

```markdown
## 1. 文档信息

| 属性 | 值 |
|------|-----|
| 文档名称 | LLD - {模块名} |
| 版本 | v1.0 |
| 作者 | {作者} |
| 创建日期 | {YYYY-MM-DD} |
| PRD 基线 | {PRD 路径} v{版本} |
| HLD 基线 | {HLD 路径} v{版本} |
| Contract 基线 | {Contract 路径} |
| Guardrails | {路径/无} |
```

---

## 追溯映射表

**输出时机**：Phase 2.6

```markdown
## 追溯映射

| 上游条目 | 来源 | LLD 章节 | 状态 |
|----------|------|----------|------|
| {PRD-001} 用户登录 | PRD | §5.2 认证流程 | ✅ 已覆盖 |
| {HLD-003} 缓存策略 | HLD | §6.1 缓存设计 | ✅ 已覆盖 |
| POST /api/v1/users | Contract | §5.1 用户接口 | ✅ 已覆盖 |
```

**状态说明**：
- ✅ 已覆盖：上游条目在 LLD 中有对应设计
- ⚠️ 部分覆盖：需要补充
- ❌ 未覆盖：缺失，必须补充

---

## 待确认问题清单

**输出时机**：Phase 2.7

```markdown
## 待确认问题

| # | 问题 | 影响章节 | 状态 |
|---|------|----------|------|
| 1 | {问题描述} | §X.X | 待确认 |
| 2 | {问题描述} | §X.X | 待确认 |
```

---

## 自检报告

**输出时机**：Phase 3.7

```markdown
## 自检报告

### 覆盖率统计
| 检查项 | 结果 |
|--------|------|
| PRD 需求覆盖率 | 100% (X/X) |
| HLD 决策承接 | ✅ 通过 |
| Contract 一致性 | ✅ 无冲突 |
| Guardrails 覆盖 | ✅ 全覆盖 / N/A |

### 问题清单
| # | 问题 | 严重度 | 状态 |
|---|------|--------|------|
| - | 无 | - | - |

### 自检结论
✅ 通过自检，可提交审查
```

**严重度定义**：
- P0（阻塞）：Contract 冲突、Guardrails 违反
- P1（严重）：模块缺失、覆盖率不足
- P2（建议）：可读性、细节问题
